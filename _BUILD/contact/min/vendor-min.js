!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery||Zepto)}((function(e){var t=function(t,i,a){t=e(t);var n,r=this,o=t.val();i="function"==typeof i?i(t.val(),void 0,t,a):i;var l={invalid:[],getCaret:function(){try{var e,i=0,a=t.get(0),n=document.selection,r=a.selectionStart;return n&&-1===navigator.appVersion.indexOf("MSIE 10")?((e=n.createRange()).moveStart("character",t.is("input")?-t.val().length:-t.text().length),i=e.text.length):(r||"0"===r)&&(i=r),i}catch(e){}},setCaret:function(e){try{if(t.is(":focus")){var i,a=t.get(0);a.setSelectionRange?a.setSelectionRange(e,e):a.createTextRange&&((i=a.createTextRange()).collapse(!0),i.moveEnd("character",e),i.moveStart("character",e),i.select())}}catch(e){}},events:function(){t.on("input.mask keyup.mask",l.behaviour).on("paste.mask drop.mask",(function(){setTimeout((function(){t.keydown().keyup()}),100)})).on("change.mask",(function(){t.data("changed",!0)})).on("blur.mask",(function(){o===t.val()||t.data("changed")||t.triggerHandler("change"),t.data("changed",!1)})).on("blur.mask",(function(){o=t.val()})).on("focus.mask",(function(t){!0===a.selectOnFocus&&e(t.target).select()})).on("focusout.mask",(function(){a.clearIfNotMatch&&!n.test(l.val())&&l.val("")}))},getRegexMask:function(){for(var e,t,a,n,o=[],l=0;l<i.length;l++)(e=r.translation[i.charAt(l)])?(t=e.pattern.toString().replace(/.{1}$|^.{1}/g,""),a=e.optional,(e=e.recursive)?(o.push(i.charAt(l)),n={digit:i.charAt(l),pattern:t}):o.push(a||e?t+"?":t)):o.push(i.charAt(l).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"));return o=o.join(""),n&&(o=o.replace(RegExp("("+n.digit+"(.*"+n.digit+")?)"),"($1)?").replace(RegExp(n.digit,"g"),n.pattern)),RegExp(o)},destroyEvents:function(){t.off("input keydown keyup paste drop blur focusout ".split(" ").join(".mask "))},val:function(e){var i=t.is("input")?"val":"text";return 0<arguments.length?(t[i]()!==e&&t[i](e),i=t):i=t[i](),i},getMCharsBeforeCount:function(e,t){for(var a=0,n=0,o=i.length;n<o&&n<e;n++)r.translation[i.charAt(n)]||(e=t?e+1:e,a++);return a},caretPos:function(e,t,a,n){return r.translation[i.charAt(Math.min(e-1,i.length-1))]?Math.min(e+a-t-n,a):l.caretPos(e+1,t,a,n)},behaviour:function(t){t=t||window.event,l.invalid=[];var i=t.keyCode||t.which;if(-1===e.inArray(i,r.byPassKeys)){var a=l.getCaret(),n=l.val().length,o=a<n,s=l.getMasked(),c=s.length,p=l.getMCharsBeforeCount(c-1)-l.getMCharsBeforeCount(n-1);return l.val(s),!o||65===i&&t.ctrlKey||(8!==i&&46!==i&&(a=l.caretPos(a,n,c,p)),l.setCaret(a)),l.callbacks(t)}},getMasked:function(e){var t,n,o=[],s=l.val(),c=0,p=i.length,d=0,u=s.length,f=1,h="push",v=-1;for(a.reverse?(h="unshift",f=-1,t=0,c=p-1,d=u-1,n=function(){return-1<c&&-1<d}):(t=p-1,n=function(){return c<p&&d<u});n();){var m=i.charAt(c),g=s.charAt(d),b=r.translation[m];b?(g.match(b.pattern)?(o[h](g),b.recursive&&(-1===v?v=c:c===t&&(c=v-f),t===v&&(c-=f)),c+=f):b.optional?(c+=f,d-=f):b.fallback?(o[h](b.fallback),c+=f,d-=f):l.invalid.push({p:d,v:g,e:b.pattern}),d+=f):(e||o[h](m),g===m&&(d+=f),c+=f)}return e=i.charAt(t),p!==u+1||r.translation[e]||o.push(e),o.join("")},callbacks:function(e){var n=l.val(),r=n!==o,s=[n,e,t,a],c=function(e,t,i){"function"==typeof a[e]&&t&&a[e].apply(this,i)};c("onChange",!0===r,s),c("onKeyPress",!0===r,s),c("onComplete",n.length===i.length,s),c("onInvalid",0<l.invalid.length,[n,e,t,l.invalid,a])}};r.mask=i,r.options=a,r.remove=function(){var e=l.getCaret();return l.destroyEvents(),l.val(r.getCleanVal()),l.setCaret(e-l.getMCharsBeforeCount(e)),t},r.getCleanVal=function(){return l.getMasked(!0)},r.init=function(i){i=i||!1,a=a||{},r.byPassKeys=e.jMaskGlobals.byPassKeys,r.translation=e.jMaskGlobals.translation,r.translation=e.extend({},r.translation,a.translation),r=e.extend(!0,{},r,a),n=l.getRegexMask(),!1===i?(a.placeholder&&t.attr("placeholder",a.placeholder),!1=="oninput"in e("input")[0]&&"on"===t.attr("autocomplete")&&t.attr("autocomplete","off"),l.destroyEvents(),l.events(),i=l.getCaret(),l.val(l.getMasked()),l.setCaret(i+l.getMCharsBeforeCount(i,!0))):(l.events(),l.val(l.getMasked()))},r.init(!t.is("input"))};e.maskWatchers={};var i=function(){var i=e(this),n={},r=i.attr("data-mask");if(i.attr("data-mask-reverse")&&(n.reverse=!0),i.attr("data-mask-clearifnotmatch")&&(n.clearIfNotMatch=!0),"true"===i.attr("data-mask-selectonfocus")&&(n.selectOnFocus=!0),a(i,r,n))return i.data("mask",new t(this,r,n))},a=function(t,i,a){a=a||{};var n=e(t).data("mask"),r=JSON.stringify;t=e(t).val()||e(t).text();try{return"function"==typeof i&&(i=i(t)),"object"!=typeof n||r(n.options)!==r(a)||n.mask!==i}catch(e){}};e.fn.mask=function(i,n){n=n||{};var r=this.selector,o=e.jMaskGlobals,l=e.jMaskGlobals.watchInterval,s=function(){if(a(this,i,n))return e(this).data("mask",new t(this,i,n))};return e(this).each(s),r&&""!==r&&o.watchInputs&&(clearInterval(e.maskWatchers[r]),e.maskWatchers[r]=setInterval((function(){e(document).find(r).each(s)}),l)),this},e.fn.unmask=function(){return clearInterval(e.maskWatchers[this.selector]),delete e.maskWatchers[this.selector],this.each((function(){var t=e(this).data("mask");t&&t.remove().removeData("mask")}))},e.fn.cleanVal=function(){return this.data("mask").getCleanVal()},e.applyDataMask=function(t){((t=t||e.jMaskGlobals.maskElements)instanceof e?t:e(t)).filter(e.jMaskGlobals.dataMaskAttr).each(i)};var n={maskElements:"input,td,span,div",dataMaskAttr:"*[data-mask]",dataMask:!0,watchInterval:300,watchInputs:!0,watchDataMask:!1,byPassKeys:[9,16,17,18,36,37,38,39,40,91],translation:{0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}}};e.jMaskGlobals=e.jMaskGlobals||{},(n=e.jMaskGlobals=e.extend(!0,{},n,e.jMaskGlobals)).dataMask&&e.applyDataMask(),setInterval((function(){e.jMaskGlobals.watchDataMask&&e.applyDataMask()}),n.watchInterval)})),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e("undefined"!=typeof jQuery?jQuery:window.Zepto)}((function(e){"use strict";function t(t){var i=t.data;t.isDefaultPrevented()||(t.preventDefault(),e(t.target).ajaxSubmit(i))}function i(t){var i=t.target,a=e(i);if(!a.is("[type=submit],[type=image]")){var n=a.closest("[type=submit]");if(0===n.length)return;i=n[0]}var r=this;if(r.clk=i,"image"==i.type)if(void 0!==t.offsetX)r.clk_x=t.offsetX,r.clk_y=t.offsetY;else if("function"==typeof e.fn.offset){var o=a.offset();r.clk_x=t.pageX-o.left,r.clk_y=t.pageY-o.top}else r.clk_x=t.pageX-i.offsetLeft,r.clk_y=t.pageY-i.offsetTop;setTimeout((function(){r.clk=r.clk_x=r.clk_y=null}),100)}function a(){if(e.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}var n={};n.fileapi=void 0!==e("<input type='file'/>").get(0).files,n.formdata=void 0!==window.FormData;var r=!!e.fn.prop;e.fn.attr2=function(){if(!r)return this.attr.apply(this,arguments);var e=this.prop.apply(this,arguments);return e&&e.jquery||"string"==typeof e?e:this.attr.apply(this,arguments)},e.fn.ajaxSubmit=function(t){function i(i){function n(e){var t=null;try{e.contentWindow&&(t=e.contentWindow.document)}catch(e){a("cannot get iframe.contentWindow document: "+e)}if(t)return t;try{t=e.contentDocument?e.contentDocument:e.document}catch(i){a("cannot get iframe.contentDocument: "+i),t=e.document}return t}function l(){var t=c.attr2("target"),i=c.attr2("action"),r=c.attr("enctype")||c.attr("encoding")||"multipart/form-data";k.setAttribute("target",v),(!o||/post/i.test(o))&&k.setAttribute("method","POST"),i!=u.url&&k.setAttribute("action",u.url),u.skipEncodingOverride||o&&!/post/i.test(o)||c.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),u.timeout&&(C=setTimeout((function(){y=!0,s(E)}),u.timeout));var l=[];try{if(u.extraData)for(var p in u.extraData)u.extraData.hasOwnProperty(p)&&l.push(e.isPlainObject(u.extraData[p])&&u.extraData[p].hasOwnProperty("name")&&u.extraData[p].hasOwnProperty("value")?e('<input type="hidden" name="'+u.extraData[p].name+'">').val(u.extraData[p].value).appendTo(k)[0]:e('<input type="hidden" name="'+p+'">').val(u.extraData[p]).appendTo(k)[0]);u.iframeTarget||m.appendTo("body"),g.attachEvent?g.attachEvent("onload",s):g.addEventListener("load",s,!1),setTimeout((function e(){try{var t=n(g).readyState;a("state = "+t),t&&"uninitialized"==t.toLowerCase()&&setTimeout(e,50)}catch(e){a("Server abort: ",e," (",e.name,")"),s(F),C&&clearTimeout(C),C=void 0}}),15);try{k.submit()}catch(e){document.createElement("form").submit.apply(k)}}finally{k.setAttribute("action",i),k.setAttribute("enctype",r),t?k.setAttribute("target",t):c.removeAttr("target"),e(l).remove()}}function s(t){if(!b.aborted&&!$){if((I=n(g))||(a("cannot access response document"),t=F),t===E&&b)return b.abort("timeout"),void T.reject(b,"timeout");if(t==F&&b)return b.abort("server abort"),void T.reject(b,"error","server abort");if(I&&I.location.href!=u.iframeSrc||y){g.detachEvent?g.detachEvent("onload",s):g.removeEventListener("load",s,!1);var i,r="success";try{if(y)throw"timeout";var o="xml"==u.dataType||I.XMLDocument||e.isXMLDoc(I);if(a("isXml="+o),!o&&window.opera&&(null===I.body||!I.body.innerHTML)&&--P)return a("requeing onLoad callback, DOM not available"),void setTimeout(s,250);var l=I.body?I.body:I.documentElement;b.responseText=l?l.innerHTML:null,b.responseXML=I.XMLDocument?I.XMLDocument:I,o&&(u.dataType="xml"),b.getResponseHeader=function(e){return{"content-type":u.dataType}[e.toLowerCase()]},l&&(b.status=Number(l.getAttribute("status"))||b.status,b.statusText=l.getAttribute("statusText")||b.statusText);var c=(u.dataType||"").toLowerCase(),p=/(json|script|text)/.test(c);if(p||u.textarea){var d=I.getElementsByTagName("textarea")[0];if(d)b.responseText=d.value,b.status=Number(d.getAttribute("status"))||b.status,b.statusText=d.getAttribute("statusText")||b.statusText;else if(p){var f=I.getElementsByTagName("pre")[0],v=I.getElementsByTagName("body")[0];f?b.responseText=f.textContent?f.textContent:f.innerText:v&&(b.responseText=v.textContent?v.textContent:v.innerText)}}else"xml"==c&&!b.responseXML&&b.responseText&&(b.responseXML=A(b.responseText));try{j=L(b,c,u)}catch(e){r="parsererror",b.error=i=e||r}}catch(e){a("error caught: ",e),r="error",b.error=i=e||r}b.aborted&&(a("upload aborted"),r=null),b.status&&(r=b.status>=200&&b.status<300||304===b.status?"success":"error"),"success"===r?(u.success&&u.success.call(u.context,j,"success",b),T.resolve(b.responseText,"success",b),h&&e.event.trigger("ajaxSuccess",[b,u])):r&&(void 0===i&&(i=b.statusText),u.error&&u.error.call(u.context,b,r,i),T.reject(b,"error",i),h&&e.event.trigger("ajaxError",[b,u,i])),h&&e.event.trigger("ajaxComplete",[b,u]),h&&!--e.active&&e.event.trigger("ajaxStop"),u.complete&&u.complete.call(u.context,b,r),$=!0,u.timeout&&clearTimeout(C),setTimeout((function(){u.iframeTarget?m.attr("src",u.iframeSrc):m.remove(),b.responseXML=null}),100)}}}var p,d,u,h,v,m,g,b,w,x,y,C,k=c[0],T=e.Deferred();if(T.abort=function(e){b.abort(e)},i)for(d=0;d<f.length;d++)p=e(f[d]),r?p.prop("disabled",!1):p.removeAttr("disabled");if((u=e.extend(!0,{},e.ajaxSettings,t)).context=u.context||u,v="jqFormIO"+(new Date).getTime(),u.iframeTarget?(x=(m=e(u.iframeTarget)).attr2("name"))?v=x:m.attr2("name",v):(m=e('<iframe name="'+v+'" src="'+u.iframeSrc+'" />')).css({position:"absolute",top:"-1000px",left:"-1000px"}),g=m[0],b={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var i="timeout"===t?"timeout":"aborted";a("aborting upload... "+i),this.aborted=1;try{g.contentWindow.document.execCommand&&g.contentWindow.document.execCommand("Stop")}catch(e){}m.attr("src",u.iframeSrc),b.error=i,u.error&&u.error.call(u.context,b,i,t),h&&e.event.trigger("ajaxError",[b,u,i]),u.complete&&u.complete.call(u.context,b,i)}},(h=u.global)&&0==e.active++&&e.event.trigger("ajaxStart"),h&&e.event.trigger("ajaxSend",[b,u]),u.beforeSend&&!1===u.beforeSend.call(u.context,b,u))return u.global&&e.active--,T.reject(),T;if(b.aborted)return T.reject(),T;(w=k.clk)&&((x=w.name)&&!w.disabled&&(u.extraData=u.extraData||{},u.extraData[x]=w.value,"image"==w.type&&(u.extraData[x+".x"]=k.clk_x,u.extraData[x+".y"]=k.clk_y)));var E=1,F=2,D=e("meta[name=csrf-token]").attr("content"),S=e("meta[name=csrf-param]").attr("content");S&&D&&(u.extraData=u.extraData||{},u.extraData[S]=D),u.forceSync?l():setTimeout(l,10);var j,I,$,P=50,A=e.parseXML||function(e,t){return window.ActiveXObject?((t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.nodeName?t:null},M=e.parseJSON||function(e){return window.eval("("+e+")")},L=function(t,i,a){var n=t.getResponseHeader("content-type")||"",r="xml"===i||!i&&n.indexOf("xml")>=0,o=r?t.responseXML:t.responseText;return r&&"parsererror"===o.documentElement.nodeName&&e.error&&e.error("parsererror"),a&&a.dataFilter&&(o=a.dataFilter(o,i)),"string"==typeof o&&("json"===i||!i&&n.indexOf("json")>=0?o=M(o):("script"===i||!i&&n.indexOf("javascript")>=0)&&e.globalEval(o)),o};return T}if(!this.length)return a("ajaxSubmit: skipping submit process - no element selected"),this;var o,l,s,c=this;"function"==typeof t?t={success:t}:void 0===t&&(t={}),o=t.type||this.attr2("method"),(s=(s="string"==typeof(l=t.url||this.attr2("action"))?e.trim(l):"")||window.location.href||"")&&(s=(s.match(/^([^#]+)/)||[])[1]),t=e.extend(!0,{url:s,success:e.ajaxSettings.success,type:o||e.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},t);var p={};if(this.trigger("form-pre-serialize",[this,t,p]),p.veto)return a("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(t.beforeSerialize&&!1===t.beforeSerialize(this,t))return a("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var d=t.traditional;void 0===d&&(d=e.ajaxSettings.traditional);var u,f=[],h=this.formToArray(t.semantic,f);if(t.data&&(t.extraData=t.data,u=e.param(t.data,d)),t.beforeSubmit&&!1===t.beforeSubmit(h,this,t))return a("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[h,this,t,p]),p.veto)return a("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var v=e.param(h,d);u&&(v=v?v+"&"+u:u),"GET"==t.type.toUpperCase()?(t.url+=(t.url.indexOf("?")>=0?"&":"?")+v,t.data=null):t.data=v;var m=[];if(t.resetForm&&m.push((function(){c.resetForm()})),t.clearForm&&m.push((function(){c.clearForm(t.includeHidden)})),!t.dataType&&t.target){var g=t.success||function(){};m.push((function(i){var a=t.replaceTarget?"replaceWith":"html";e(t.target)[a](i).each(g,arguments)}))}else t.success&&m.push(t.success);if(t.success=function(e,i,a){for(var n=t.context||this,r=0,o=m.length;o>r;r++)m[r].apply(n,[e,i,a||c,c])},t.error){var b=t.error;t.error=function(e,i,a){var n=t.context||this;b.apply(n,[e,i,a,c])}}if(t.complete){var w=t.complete;t.complete=function(e,i){var a=t.context||this;w.apply(a,[e,i,c])}}var x=e("input[type=file]:enabled",this).filter((function(){return""!==e(this).val()})).length>0,y="multipart/form-data",C=c.attr("enctype")==y||c.attr("encoding")==y,k=n.fileapi&&n.formdata;a("fileAPI :"+k);var T,E=(x||C)&&!k;!1!==t.iframe&&(t.iframe||E)?t.closeKeepAlive?e.get(t.closeKeepAlive,(function(){T=i(h)})):T=i(h):T=(x||C)&&k?function(i){for(var a=new FormData,n=0;n<i.length;n++)a.append(i[n].name,i[n].value);if(t.extraData){var r=function(i){var a,n,r=e.param(i,t.traditional).split("&"),o=r.length,l=[];for(a=0;o>a;a++)r[a]=r[a].replace(/\+/g," "),n=r[a].split("="),l.push([decodeURIComponent(n[0]),decodeURIComponent(n[1])]);return l}(t.extraData);for(n=0;n<r.length;n++)r[n]&&a.append(r[n][0],r[n][1])}t.data=null;var l=e.extend(!0,{},e.ajaxSettings,t,{contentType:!1,processData:!1,cache:!1,type:o||"POST"});t.uploadProgress&&(l.xhr=function(){var i=e.ajaxSettings.xhr();return i.upload&&i.upload.addEventListener("progress",(function(e){var i=0,a=e.loaded||e.position,n=e.total;e.lengthComputable&&(i=Math.ceil(a/n*100)),t.uploadProgress(e,a,n,i)}),!1),i}),l.data=null;var s=l.beforeSend;return l.beforeSend=function(e,i){i.data=t.formData?t.formData:a,s&&s.call(this,e,i)},e.ajax(l)}(h):e.ajax(t),c.removeData("jqxhr").data("jqxhr",T);for(var F=0;F<f.length;F++)f[F]=null;return this.trigger("form-submit-notify",[this,t]),this},e.fn.ajaxForm=function(n){if((n=n||{}).delegation=n.delegation&&e.isFunction(e.fn.on),!n.delegation&&0===this.length){var r={s:this.selector,c:this.context};return!e.isReady&&r.s?(a("DOM not ready, queuing ajaxForm"),e((function(){e(r.s,r.c).ajaxForm(n)})),this):(a("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return n.delegation?(e(document).off("submit.form-plugin",this.selector,t).off("click.form-plugin",this.selector,i).on("submit.form-plugin",this.selector,n,t).on("click.form-plugin",this.selector,n,i),this):this.ajaxFormUnbind().bind("submit.form-plugin",n,t).bind("click.form-plugin",n,i)},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(t,i){var a=[];if(0===this.length)return a;var r,o,l,s,c,p,d,u,f=this[0],h=this.attr("id"),v=t?f.getElementsByTagName("*"):f.elements;if(v&&!/MSIE [678]/.test(navigator.userAgent)&&(v=e(v).get()),h&&((r=e(':input[form="'+h+'"]').get()).length&&(v=(v||[]).concat(r))),!v||!v.length)return a;for(o=0,d=v.length;d>o;o++)if((s=(p=v[o]).name)&&!p.disabled)if(t&&f.clk&&"image"==p.type)f.clk==p&&(a.push({name:s,value:e(p).val(),type:p.type}),a.push({name:s+".x",value:f.clk_x},{name:s+".y",value:f.clk_y}));else if((c=e.fieldValue(p,!0))&&c.constructor==Array)for(i&&i.push(p),l=0,u=c.length;u>l;l++)a.push({name:s,value:c[l]});else if(n.fileapi&&"file"==p.type){i&&i.push(p);var m=p.files;if(m.length)for(l=0;l<m.length;l++)a.push({name:s,value:m[l],type:p.type});else a.push({name:s,value:"",type:p.type})}else null!=c&&(i&&i.push(p),a.push({name:s,value:c,type:p.type,required:p.required}));if(!t&&f.clk){var g=e(f.clk),b=g[0];(s=b.name)&&!b.disabled&&"image"==b.type&&(a.push({name:s,value:g.val()}),a.push({name:s+".x",value:f.clk_x},{name:s+".y",value:f.clk_y}))}return a},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var i=[];return this.each((function(){var a=this.name;if(a){var n=e.fieldValue(this,t);if(n&&n.constructor==Array)for(var r=0,o=n.length;o>r;r++)i.push({name:a,value:n[r]});else null!=n&&i.push({name:this.name,value:n})}})),e.param(i)},e.fn.fieldValue=function(t){for(var i=[],a=0,n=this.length;n>a;a++){var r=this[a],o=e.fieldValue(r,t);null==o||o.constructor==Array&&!o.length||(o.constructor==Array?e.merge(i,o):i.push(o))}return i},e.fieldValue=function(t,i){var a=t.name,n=t.type,r=t.tagName.toLowerCase();if(void 0===i&&(i=!0),i&&(!a||t.disabled||"reset"==n||"button"==n||("checkbox"==n||"radio"==n)&&!t.checked||("submit"==n||"image"==n)&&t.form&&t.form.clk!=t||"select"==r&&-1==t.selectedIndex))return null;if("select"==r){var o=t.selectedIndex;if(0>o)return null;for(var l=[],s=t.options,c="select-one"==n,p=c?o+1:s.length,d=c?o:0;p>d;d++){var u=s[d];if(u.selected){var f=u.value;if(f||(f=u.attributes&&u.attributes.value&&!u.attributes.value.specified?u.text:u.value),c)return f;l.push(f)}}return l}return e(t).val()},e.fn.clearForm=function(t){return this.each((function(){e("input,select,textarea",this).clearFields(t)}))},e.fn.clearFields=e.fn.clearInputs=function(t){var i=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each((function(){var a=this.type,n=this.tagName.toLowerCase();i.test(a)||"textarea"==n?this.value="":"checkbox"==a||"radio"==a?this.checked=!1:"select"==n?this.selectedIndex=-1:"file"==a?/MSIE/.test(navigator.userAgent)?e(this).replaceWith(e(this).clone(!0)):e(this).val(""):t&&(!0===t&&/hidden/.test(a)||"string"==typeof t&&e(this).is(t))&&(this.value="")}))},e.fn.resetForm=function(){return this.each((function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()}))},e.fn.enable=function(e){return void 0===e&&(e=!0),this.each((function(){this.disabled=!e}))},e.fn.selected=function(t){return void 0===t&&(t=!0),this.each((function(){var i=this.type;if("checkbox"==i||"radio"==i)this.checked=t;else if("option"==this.tagName.toLowerCase()){var a=e(this).parent("select");t&&a[0]&&"select-one"==a[0].type&&a.find("option").selected(!1),this.selected=t}}))},e.fn.ajaxSubmit.debug=!1})),function(e){if("function"==typeof require&&"object"==typeof exports&&"object"==typeof module){try{var t=require("jquery")}catch(e){}module.exports=e(t)}else if("function"==typeof define&&define.amd)define(["jquery"],(function(t){return e(t)}));else{var i;try{i=eval("this")}catch(e){i=window}i.deparam=e(i.jQuery)}}((function(e){var t=function(e,t){var i={},a={true:!0,false:!1,null:null};return e?(e.replace(/\+/g," ").split("&").forEach((function(e){var n,r=e.split("="),o=decodeURIComponent(r[0]),l=i,s=0,c=o.split("]["),p=c.length-1;if(/\[/.test(c[0])&&/\]$/.test(c[p])?(c[p]=c[p].replace(/\]$/,""),p=(c=c.shift().split("[").concat(c)).length-1):p=0,2===r.length)if(n=decodeURIComponent(r[1]),t&&(n=n&&!isNaN(n)&&+n+""===n?+n:"undefined"===n?void 0:void 0!==a[n]?a[n]:n),p)for(;s<=p;s++)l=l[o=""===c[s]?l.length:c[s]]=s<p?l[o]||(c[s+1]&&isNaN(c[s+1])?{}:[]):n;else"[object Array]"===Object.prototype.toString.call(i[o])?i[o].push(n):{}.hasOwnProperty.call(i,o)?i[o]=[i[o],n]:i[o]=n;else o&&(i[o]=t?void 0:"")})),i):i};return e&&(e.prototype.deparam=e.deparam=t),t})),function(e){"use strict";function t(t,i){return e.map(t,(function(e){return function(e,t){return e+".touchspin_"+t}(e,i)}))}var i=0;e.fn.TouchSpin=function(a){if("destroy"!==a){var n={min:0,max:100,initval:"",step:1,decimals:0,stepinterval:100,forcestepdivisibility:"round",stepintervaldelay:500,verticalbuttons:!1,verticalupclass:"glyphicon glyphicon-chevron-up",verticaldownclass:"glyphicon glyphicon-chevron-down",prefix:"",postfix:"",prefix_extraclass:"",postfix_extraclass:"",booster:!0,boostat:10,maxboostedstep:!1,mousewheel:!0,buttondown_class:"btn btn-default",buttonup_class:"btn btn-default",buttondown_txt:"-",buttonup_txt:"+"},r={min:"min",max:"max",initval:"init-val",step:"step",decimals:"decimals",stepinterval:"step-interval",verticalbuttons:"vertical-buttons",verticalupclass:"vertical-up-class",verticaldownclass:"vertical-down-class",forcestepdivisibility:"force-step-divisibility",stepintervaldelay:"step-interval-delay",prefix:"prefix",postfix:"postfix",prefix_extraclass:"prefix-extra-class",postfix_extraclass:"postfix-extra-class",booster:"booster",boostat:"boostat",maxboostedstep:"max-boosted-step",mousewheel:"mouse-wheel",buttondown_class:"button-down-class",buttonup_class:"button-up-class",buttondown_txt:"button-down-txt",buttonup_txt:"button-up-txt"};return this.each((function(){function o(t){m=e.extend({},m,t)}function l(t){t.addClass("bootstrap-touchspin");var i,a,n=T.prev(),r=T.next(),o='<span class="input-group-addon bootstrap-touchspin-prefix">'+m.prefix+"</span>",l='<span class="input-group-addon bootstrap-touchspin-postfix">'+m.postfix+"</span>";n.hasClass("input-group-btn")?(i='<button class="'+m.buttondown_class+' bootstrap-touchspin-down" type="button">'+m.buttondown_txt+"</button>",n.append(i)):(i='<span class="input-group-btn"><button class="'+m.buttondown_class+' bootstrap-touchspin-down" type="button">'+m.buttondown_txt+"</button></span>",e(i).insertBefore(T)),r.hasClass("input-group-btn")?(a='<button class="'+m.buttonup_class+' bootstrap-touchspin-up" type="button">'+m.buttonup_txt+"</button>",r.prepend(a)):(a='<span class="input-group-btn"><button class="'+m.buttonup_class+' bootstrap-touchspin-up" type="button">'+m.buttonup_txt+"</button></span>",e(a).insertAfter(T)),e(o).insertBefore(T),e(l).insertAfter(T),g=t}function s(){var t;t=m.verticalbuttons?'<div class="input-group bootstrap-touchspin"><span class="input-group-addon bootstrap-touchspin-prefix">'+m.prefix+'</span><span class="input-group-addon bootstrap-touchspin-postfix">'+m.postfix+'</span><span class="input-group-btn-vertical"><button class="'+m.buttondown_class+' bootstrap-touchspin-up" type="button"><i class="'+m.verticalupclass+'"></i></button><button class="'+m.buttonup_class+' bootstrap-touchspin-down" type="button"><i class="'+m.verticaldownclass+'"></i></button></span></div>':'<div class="input-group bootstrap-touchspin"><span class="input-group-btn"><button class="'+m.buttondown_class+' bootstrap-touchspin-down" type="button">'+m.buttondown_txt+'</button></span><span class="input-group-addon bootstrap-touchspin-prefix">'+m.prefix+'</span><span class="input-group-addon bootstrap-touchspin-postfix">'+m.postfix+'</span><span class="input-group-btn"><button class="'+m.buttonup_class+' bootstrap-touchspin-up" type="button">'+m.buttonup_txt+"</button></span></div>",g=e(t).insertBefore(T),e(".bootstrap-touchspin-prefix",g).after(T),T.hasClass("input-sm")?g.addClass("input-group-sm"):T.hasClass("input-lg")&&g.addClass("input-group-lg")}function c(){var e,t,i;""!==(e=T.val())&&(m.decimals>0&&"."===e||(t=parseFloat(e),isNaN(t)&&(t=0),i=t,t.toString()!==e&&(i=t),t<m.min&&(i=m.min),t>m.max&&(i=m.max),i=function(e){switch(m.forcestepdivisibility){case"round":return(Math.round(e/m.step)*m.step).toFixed(m.decimals);case"floor":return(Math.floor(e/m.step)*m.step).toFixed(m.decimals);case"ceil":return(Math.ceil(e/m.step)*m.step).toFixed(m.decimals);default:return e}}(i),Number(e).toString()!==i.toString()&&(T.val(i),T.trigger("change"))))}function p(){if(m.booster){var e=Math.pow(2,Math.floor(F/m.boostat))*m.step;return m.maxboostedstep&&e>m.maxboostedstep&&(e=m.maxboostedstep,w=Math.round(w/e)*e),Math.max(m.step,e)}return m.step}function d(){c(),w=parseFloat(b.input.val()),isNaN(w)&&(w=0);var e=w,t=p();(w+=t)>m.max&&(w=m.max,T.trigger("touchspin.on.max"),v()),b.input.val(Number(w).toFixed(m.decimals)),e!==w&&T.trigger("change")}function u(){c(),w=parseFloat(b.input.val()),isNaN(w)&&(w=0);var e=w,t=p();(w-=t)<m.min&&(w=m.min,T.trigger("touchspin.on.min"),v()),b.input.val(w.toFixed(m.decimals)),e!==w&&T.trigger("change")}function f(){v(),F=0,D="down",T.trigger("touchspin.on.startspin"),T.trigger("touchspin.on.startdownspin"),C=setTimeout((function(){x=setInterval((function(){F++,u()}),m.stepinterval)}),m.stepintervaldelay)}function h(){v(),F=0,D="up",T.trigger("touchspin.on.startspin"),T.trigger("touchspin.on.startupspin"),k=setTimeout((function(){y=setInterval((function(){F++,d()}),m.stepinterval)}),m.stepintervaldelay)}function v(){switch(clearTimeout(C),clearTimeout(k),clearInterval(x),clearInterval(y),D){case"up":T.trigger("touchspin.on.stopupspin"),T.trigger("touchspin.on.stopspin");break;case"down":T.trigger("touchspin.on.stopdownspin"),T.trigger("touchspin.on.stopspin")}F=0,D=!1}var m,g,b,w,x,y,C,k,T=e(this),E=T.data(),F=0,D=!1;!function(){if(!T.data("alreadyinitialized")){if(T.data("alreadyinitialized",!0),i+=1,T.data("spinnerid",i),!T.is("input"))return void console.log("Must be an input.");""!==(m=e.extend({},n,E,function(){var t={};return e.each(r,(function(e,i){var a="bts-"+i;T.is("[data-"+a+"]")&&(t[e]=T.data(a))})),t}(),a)).initval&&""===T.val()&&T.val(m.initval),c(),function(){var e=T.val(),t=T.parent();""!==e&&(e=Number(e).toFixed(m.decimals)),T.data("initvalue",e).val(e),T.addClass("form-control"),t.hasClass("input-group")?l(t):s()}(),b={down:e(".bootstrap-touchspin-down",g),up:e(".bootstrap-touchspin-up",g),input:e("input",g),prefix:e(".bootstrap-touchspin-prefix",g).addClass(m.prefix_extraclass),postfix:e(".bootstrap-touchspin-postfix",g).addClass(m.postfix_extraclass)},""===m.prefix&&b.prefix.hide(),""===m.postfix&&b.postfix.hide(),T.on("keydown",(function(e){var t=e.keyCode||e.which;38===t?("up"!==D&&(d(),h()),e.preventDefault()):40===t&&("down"!==D&&(u(),f()),e.preventDefault())})),T.on("keyup",(function(e){var t=e.keyCode||e.which;38===t?v():40===t&&v()})),T.on("blur",(function(){c()})),b.down.on("keydown",(function(e){var t=e.keyCode||e.which;(32===t||13===t)&&("down"!==D&&(u(),f()),e.preventDefault())})),b.down.on("keyup",(function(e){var t=e.keyCode||e.which;(32===t||13===t)&&v()})),b.up.on("keydown",(function(e){var t=e.keyCode||e.which;(32===t||13===t)&&("up"!==D&&(d(),h()),e.preventDefault())})),b.up.on("keyup",(function(e){var t=e.keyCode||e.which;(32===t||13===t)&&v()})),b.down.on("mousedown.touchspin",(function(e){b.down.off("touchstart.touchspin"),T.is(":disabled")||(u(),f(),e.preventDefault(),e.stopPropagation())})),b.down.on("touchstart.touchspin",(function(e){b.down.off("mousedown.touchspin"),T.is(":disabled")||(u(),f(),e.preventDefault(),e.stopPropagation())})),b.up.on("mousedown.touchspin",(function(e){b.up.off("touchstart.touchspin"),T.is(":disabled")||(d(),h(),e.preventDefault(),e.stopPropagation())})),b.up.on("touchstart.touchspin",(function(e){b.up.off("mousedown.touchspin"),T.is(":disabled")||(d(),h(),e.preventDefault(),e.stopPropagation())})),b.up.on("mouseout touchleave touchend touchcancel",(function(e){D&&(e.stopPropagation(),v())})),b.down.on("mouseout touchleave touchend touchcancel",(function(e){D&&(e.stopPropagation(),v())})),b.down.on("mousemove touchmove",(function(e){D&&(e.stopPropagation(),e.preventDefault())})),b.up.on("mousemove touchmove",(function(e){D&&(e.stopPropagation(),e.preventDefault())})),e(document).on(t(["mouseup","touchend","touchcancel"],i).join(" "),(function(e){D&&(e.preventDefault(),v())})),e(document).on(t(["mousemove","touchmove","scroll","scrollstart"],i).join(" "),(function(e){D&&(e.preventDefault(),v())})),T.on("mousewheel DOMMouseScroll",(function(e){if(m.mousewheel&&T.is(":focus")){var t=e.originalEvent.wheelDelta||-e.originalEvent.deltaY||-e.originalEvent.detail;e.stopPropagation(),e.preventDefault(),0>t?u():d()}})),T.on("touchspin.uponce",(function(){v(),d()})),T.on("touchspin.downonce",(function(){v(),u()})),T.on("touchspin.startupspin",(function(){h()})),T.on("touchspin.startdownspin",(function(){f()})),T.on("touchspin.stopspin",(function(){v()})),T.on("touchspin.updatesettings",(function(e,t){!function(e){o(e),c();var t=b.input.val();""!==t&&(t=Number(b.input.val()),b.input.val(t.toFixed(m.decimals)))}(t)})),b.input.css("display","block")}}()}))}this.each((function(){var i=e(this).data();e(document).off(t(["mouseup","touchend","touchcancel","mousemove","touchmove","scroll","scrollstart"],i.spinnerid).join(" "))}))}}(jQuery),function(e){"use strict";e.fn.fileinputLocales={},String.prototype.repl=function(e,t){return this.split(e).join(t)};var t=function(e){var t,i=document.createElement("div");return i.innerHTML="\x3c!--[if IE "+e+"]><i></i><![endif]--\x3e",t=1===i.getElementsByTagName("i").length,document.body.appendChild(i),i.parentNode.removeChild(i),t},i={data:{},init:function(e){var t=e.initialPreview,a=e.id;t.length>0&&!f(t)&&(t=t.split(e.initialPreviewDelimiter)),i.data[a]={content:t,config:e.initialPreviewConfig,tags:e.initialPreviewThumbTags,delimiter:e.initialPreviewDelimiter,template:e.previewGenericTemplate,msg:function(t){return e.getMsgSelected(t)},initId:e.previewInitId,footer:e.getLayoutTemplate("footer"),isDelete:e.initialPreviewShowDelete,caption:e.initialCaption,actions:function(t,i,a,n,r){return e.renderFileActions(t,i,a,n,r)}}},fetch:function(e){return i.data[e].content.filter((function(e){return null!==e}))},count:function(e,t){return i.data[e]&&i.data[e].content?t?i.data[e].content.length:i.fetch(e).length:0},get:function(e,t,a){var n,r="init_"+t,o=i.data[e],l=o.initId+"-"+r;return a=void 0===a||a,null===o.content[t]?"":(n=o.template.repl("{previewId}",l).repl("{frameClass}"," file-preview-initial").repl("{fileindex}",r).repl("{content}",o.content[t]).repl("{footer}",i.footer(e,t,a)),o.tags.length&&o.tags[t]&&(n=g(n,o.tags[t])),
n)},add:function(t,a,n,r,o){var l,s=e.extend(!0,{},i.data[t]);return f(a)||(a=a.split(s.delimiter)),o?(l=s.content.push(a)-1,s.config[l]=n,s.tags[l]=r):(l=a.length,s.content=a,s.config=n,s.tags=r),i.data[t]=s,l},set:function(t,a,n,r,o){var l,s=e.extend(!0,{},i.data[t]);if(f(a)||(a=a.split(s.delimiter)),o){for(l=0;l<a.length;l++)s.content.push(a[l]);for(l=0;l<n.length;l++)s.config.push(n[l]);for(l=0;l<r.length;l++)s.tags.push(r[l])}else s.content=a,s.config=n,s.tags=r;i.data[t]=s},unset:function(e,t){var a=i.count(e);if(a){if(1===a)return i.data[e].content=[],void(i.data[e].config=[]);i.data[e].content[t]=null,i.data[e].config[t]=null}},out:function(e){var t="",a=i.data[e],n=i.count(e,!0);if(0===n)return{content:"",caption:""};for(var r=0;n>r;r++)t+=i.get(e,r);return{content:t,caption:a.msg(i.count(e))}},footer:function(e,t,a){var n=i.data[e];if(a=void 0===a||a,0===n.config.length||u(n.config[t]))return"";var r=n.config[t],o=h("caption",r)?r.caption:"",l=h("width",r)?r.width:"auto",s=!!h("url",r)&&r.url,c=h("key",r)?r.key:null,p=!1===s&&a,d=n.isDelete?n.actions(!1,!0,p,s,c):"";return n.footer.repl("{actions}",d).repl("{caption}",o).repl("{width}",l).repl("{indicator}","").repl("{indicatorTitle}","")}},a=function(){return window.File&&window.FileReader},n=function(){return a&&window.FormData},r=function(e,t){e.removeClass(t).addClass(t)},o={removeIcon:'<i class="glyphicon glyphicon-trash text-danger"></i>',removeClass:"btn btn-xs btn-default",removeTitle:"Remove file",uploadIcon:'<i class="glyphicon glyphicon-upload text-info"></i>',uploadClass:"btn btn-xs btn-default",uploadTitle:"Upload file",indicatorNew:'<i class="glyphicon glyphicon-hand-down text-warning"></i>',indicatorSuccess:'<i class="glyphicon glyphicon-ok-sign file-icon-large text-success"></i>',indicatorError:'<i class="glyphicon glyphicon-exclamation-sign text-danger"></i>',indicatorLoading:'<i class="glyphicon glyphicon-hand-up text-muted"></i>',indicatorNewTitle:"Not uploaded yet",indicatorSuccessTitle:"Uploaded",indicatorErrorTitle:"Upload Error",indicatorLoadingTitle:"Uploading ..."},l={main1:'{preview}\n<div class="kv-upload-progress hide"></div>\n<div class="input-group {class}">\n   {caption}\n   <div class="input-group-btn">\n       {remove}\n       {cancel}\n       {upload}\n       {browse}\n   </div>\n</div>',main2:'{preview}\n<div class="kv-upload-progress hide"></div>\n{remove}\n{cancel}\n{upload}\n{browse}\n',preview:'<div class="file-preview {class}">\n    <div class="close fileinput-remove">&times;</div>\n    <div class="{dropClass}">\n    <div class="file-preview-thumbnails">\n    </div>\n    <div class="clearfix"></div>    <div class="file-preview-status text-center text-success"></div>\n    <div class="kv-fileinput-error"></div>\n    </div>\n</div>',icon:'<span class="glyphicon glyphicon-file kv-caption-icon"></span>',caption:'<div tabindex="-1" class="form-control file-caption {class}">\n   <span class="file-caption-ellipsis">&hellip;</span>\n   <div class="file-caption-name"></div>\n</div>',modal:'<div id="{id}" class="modal fade">\n  <div class="modal-dialog modal-lg">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h3 class="modal-title">Detailed Preview <small>{title}</small></h3>\n      </div>\n      <div class="modal-body">\n        <textarea class="form-control" style="font-family:Monaco,Consolas,monospace; height: {height}px;" readonly>{body}</textarea>\n      </div>\n    </div>\n  </div>\n</div>',progress:'<div class="progress">\n    <div class="{class}" role="progressbar" aria-valuenow="{percent}" aria-valuemin="0" aria-valuemax="100" style="width:{percent}%;">\n        {percent}%\n     </div>\n</div>',footer:'<div class="file-thumbnail-footer">\n    <div class="file-caption-name">{caption}</div>\n    {actions}\n</div>',actions:'<div class="file-actions">\n    <div class="file-footer-buttons">\n        {upload}{delete}{other}    </div>\n    <div class="file-upload-indicator" tabindex="-1" title="{indicatorTitle}">{indicator}</div>\n    <div class="clearfix"></div>\n</div>',actionDelete:'<button type="button" class="kv-file-remove {removeClass}" title="{removeTitle}"{dataUrl}{dataKey}>{removeIcon}</button>\n',actionUpload:'<button type="button" class="kv-file-upload {uploadClass}" title="{uploadTitle}">   {uploadIcon}\n</button>\n'},s={generic:'<div class="file-preview-frame{frameClass}" id="{previewId}" data-fileindex="{fileindex}">\n   {content}\n   {footer}\n</div>\n',html:'<div class="file-preview-frame{frameClass}" id="{previewId}" data-fileindex="{fileindex}">\n    <object data="{data}" type="{type}" width="{width}" height="{height}">\n       <div class="file-preview-other">\n       {previewFileIcon}\n   </div>\n    </object>\n   {footer}\n</div>',image:'<div class="file-preview-frame{frameClass}" id="{previewId}" data-fileindex="{fileindex}">\n   <img src="{data}" class="file-preview-image" title="{caption}" alt="{caption}" style="width:{width};height:{height};">\n   {footer}\n</div>\n',text:'<div class="file-preview-frame{frameClass}" id="{previewId}" data-fileindex="{fileindex}">\n   <div class="file-preview-text" title="{caption}" style="width:{width};height:{height};">\n       {data}\n   </div>\n   {footer}\n</div>',video:'<div class="file-preview-frame{frameClass}" id="{previewId}" data-fileindex="{fileindex}" title="{caption}" style="width:{width};height:{height};">\n   <video width="{width}" height="{height}" controls>\n       <source src="{data}" type="{type}">\n       <div class="file-preview-other">\n       {previewFileIcon}\n   </div>\n   </video>\n   {footer}\n</div>\n',audio:'<div class="file-preview-frame{frameClass}" id="{previewId}" data-fileindex="{fileindex}" title="{caption}" style="width:{width};height:{height};">\n   <audio controls>\n       <source src="{data}" type="{type}">\n       <div class="file-preview-other">\n       {previewFileIcon}\n   </div>\n   </audio>\n   {footer}\n</div>',flash:'<div class="file-preview-frame{frameClass}" id="{previewId}" data-fileindex="{fileindex}" title="{caption}" style="width:{width};height:{height};">\n   <object type="application/x-shockwave-flash" width="{width}" height="{height}" data="{data}">\n      <param name="controller" value="true" />\n      <param name="allowFullScreen" value="true" />\n      <param name="allowScriptAccess" value="always" />\n      <param name="autoPlay" value="false" />\n      <param name="autoStart" value="false" />\n      <param name="quality" value="high" />\n       <div class="file-preview-other">\n       {previewFileIcon}\n   </div>\n   </object>\n   {footer}\n</div>\n',object:'<div class="file-preview-frame{frameClass}" id="{previewId}" data-fileindex="{fileindex}" title="{caption}" style="width:{width};height:{height};">\n   <object data="{data}" type="{type}" width="{width}" height="{height}">\n       <param name="movie" value="{caption}" />\n      <param name="controller" value="true" />\n      <param name="allowFullScreen" value="true" />\n      <param name="allowScriptAccess" value="always" />\n      <param name="autoPlay" value="false" />\n      <param name="autoStart" value="false" />\n      <param name="quality" value="high" />\n         <div class="file-preview-other">\n       {previewFileIcon}\n   </div>\n   </object>\n   {footer}\n</div>',other:'<div class="file-preview-frame{frameClass}" id="{previewId}" data-fileindex="{fileindex}" title="{caption}" style="width:{width};height:{height};">\n   <div class="file-preview-other">\n       {previewFileIcon}\n   </div>\n   {footer}\n</div>'},c=["image","html","text","video","audio","flash","object"],p={image:{width:"auto",height:"160px"},html:{width:"213px",height:"160px"},text:{width:"160px",height:"160px"},video:{width:"213px",height:"160px"},audio:{width:"213px",height:"80px"},flash:{width:"213px",height:"160px"},object:{width:"160px",height:"160px"},other:{width:"160px",height:"160px"}},d={image:function(e,t){return void 0!==e?e.match("image.*"):t.match(/\.(gif|png|jpe?g)$/i)},html:function(e,t){return void 0!==e?"text/html"===e:t.match(/\.(htm|html)$/i)},text:function(e,t){return void 0!==e&&e.match("text.*")||t.match(/\.(txt|md|csv|nfo|php|ini)$/i)},video:function(e,t){return void 0!==e&&e.match(/\.video\/(ogg|mp4|webm)$/i)||t.match(/\.(og?|mp4|webm)$/i)},audio:function(e,t){return void 0!==e&&e.match(/\.audio\/(ogg|mp3|wav)$/i)||t.match(/\.(ogg|mp3|wav)$/i)},flash:function(e,t){return void 0!==e&&"application/x-shockwave-flash"===e||t.match(/\.(swf)$/i)},object:function(){return!0},other:function(){return!0}},u=function(t,i){return null==t||0===t.length||i&&""===e.trim(t)},f=function(e){return Array.isArray(e)||"[object Array]"===Object.prototype.toString.call(e)},h=function(e,t){return"object"==typeof t&&e in t},v=function(t,i,a){return u(t)||u(t[i])?a:e(t[i])},m=function(){return Math.round((new Date).getTime()+100*Math.random())},g=function(t,i){var a=t;return i=i||{},e.each(i,(function(e,t){"function"==typeof t&&(t=t()),a=a.repl(e,t)})),a},b=window.URL||window.webkitURL,w=function(i,n){var r=this;r.$element=e(i),r.validate()&&(a()||t(9)?(r.init(n),r.listen()):r.$element.removeClass("file-loading"))};w.prototype={constructor:w,validate:function(){return"file"===this.$element.attr("type")||('<div class="help-block alert alert-warning"><h4>Invalid Input Type</h4>You must set an input <code>type = file</code> for <b>bootstrap-fileinput</b> plugin to initialize.</div>',this.$element.after('<div class="help-block alert alert-warning"><h4>Invalid Input Type</h4>You must set an input <code>type = file</code> for <b>bootstrap-fileinput</b> plugin to initialize.</div>'),!1)},init:function(a){var l,s=this,p=s.$element;e.each(a,(function(e,t){s[e]="maxFileCount"===e||"maxFileSize"===e?function(e,t){return t=t||0,"number"==typeof e?e:("string"==typeof e&&(e=parseFloat(e)),isNaN(e)?t:e)}(t):t})),s.fileInputCleared=!1,s.fileBatchCompleted=!0,u(s.allowedPreviewTypes)&&(s.allowedPreviewTypes=c),s.uploadFileAttr=u(p.attr("name"))?"file_data":p.attr("name"),s.reader=null,s.formdata={},s.isIE9=t(9),s.isIE10=t(10),s.filestack=[],s.ajaxRequests=[],s.isError=!1,s.ajaxAborted=!1,s.dropZoneEnabled=function(){var e=document.createElement("div");return!t(9)&&(void 0!==e.draggable||void 0!==e.ondragstart&&void 0!==e.ondrop)}()&&s.dropZoneEnabled,s.isDisabled=s.$element.attr("disabled")||s.$element.attr("readonly"),s.isUploadable=n&&!u(s.uploadUrl),s.slug="function"==typeof a.slugCallback?a.slugCallback:s.slugDefault,s.mainTemplate=s.getLayoutTemplate(s.showCaption?"main1":"main2"),s.captionTemplate=s.getLayoutTemplate("caption"),s.previewGenericTemplate=s.getPreviewTemplate("generic"),u(s.$element.attr("id"))&&s.$element.attr("id",m()),void 0===s.$container?s.$container=s.createContainer():s.refreshContainer(),s.$progress=s.$container.find(".kv-upload-progress"),s.$btnUpload=s.$container.find(".kv-fileinput-upload"),s.$captionContainer=v(a,"elCaptionContainer",s.$container.find(".file-caption")),s.$caption=v(a,"elCaptionText",s.$container.find(".file-caption-name")),s.$previewContainer=v(a,"elPreviewContainer",s.$container.find(".file-preview")),s.$preview=v(a,"elPreviewImage",s.$container.find(".file-preview-thumbnails")),s.$previewStatus=v(a,"elPreviewStatus",s.$container.find(".file-preview-status")),s.$errorContainer=v(a,"elErrorContainer",s.$previewContainer.find(".kv-fileinput-error")),u(s.msgErrorClass)||r(s.$errorContainer,s.msgErrorClass),s.$errorContainer.hide(),s.fileActionSettings=e.extend(o,a.fileActionSettings),s.previewInitId="preview-"+m(),s.id=s.$element.attr("id"),i.init(s),s.initPreview(!0),s.initPreviewDeletes(),s.options=a,s.setFileDropZoneTitle(),s.uploadCount=0,s.uploadPercent=0,s.$element.removeClass("file-loading"),l=s.getLayoutTemplate("progress"),s.progressTemplate=l.replace("{class}",s.progressClass),s.progressCompleteTemplate=l.replace("{class}",s.progressCompleteClass),s.setEllipsis()},parseError:function(t,i,a){var n=e.trim(i+""),r="."===n.slice(-1)?"":".",o=e(t.responseText).text();return this.showAjaxErrorDetails?n+=r+(o=(o=e.trim(o.replace(/\n\s*\n/g,"\n"))).length>0?"<pre>"+o+"</pre>":""):n+=r,a?"<b>"+a+": </b>"+t:n},raise:function(t,i){var a=this,n=e.Event(t),r=!1;if(void 0!==i?a.$element.trigger(n,i):a.$element.trigger(n),n.result&&(r=!0),r)switch(t){case"filebatchuploadcomplete":case"filebatchuploadsuccess":case"fileuploaded":case"fileclear":case"filecleared":case"filereset":case"fileerror":case"filefoldererror":case"fileuploaderror":case"filebatchuploaderror":case"filedeleteerror":case"filecustomerror":break;default:a.ajaxAborted=r}},getLayoutTemplate:function(e){var t=this,i=h(e,t.layoutTemplates)?t.layoutTemplates[e]:l[e];return u(t.customLayoutTags)?i:g(i,t.customLayoutTags)},getPreviewTemplate:function(e){var t=this,i=h(e,t.previewTemplates)?t.previewTemplates[e]:s[e];return i=i.repl("{previewFileIcon}",t.previewFileIcon),u(t.customPreviewTags)?i:g(i,t.customPreviewTags)},getOutData:function(e,t,i){var a=this;return e=e||{},t=t||{},i=i||a.filestack.slice(0)||{},{form:a.formdata,files:i,extra:a.getExtraData(),response:t,reader:a.reader,jqXHR:e}},setEllipsis:function(){var e=this.$captionContainer,t=this.$caption,i=t.clone().css("height","auto").hide();e.parent().before(i),e.removeClass("kv-has-ellipsis"),i.outerWidth()>t.outerWidth()&&e.addClass("kv-has-ellipsis"),i.remove()},listen:function(){var t=this,i=t.$element,a=t.$captionContainer,n=t.$btnFile,r=i.closest("form");i.on("change",e.proxy(t.change,t)),e(window).on("resize",(function(){t.setEllipsis()})),n.off("click").on("click",(function(){t.raise("filebrowse"),t.isError&&!t.isUploadable&&t.clear(),a.focus()})),r.off("reset").on("reset",e.proxy(t.reset,t)),t.$container.off("click").on("click",".fileinput-remove:not([disabled])",e.proxy(t.clear,t)).on("click",".fileinput-cancel",e.proxy(t.cancel,t)),t.isUploadable&&t.dropZoneEnabled&&t.showPreview&&t.initDragDrop(),t.isUploadable||r.on("submit",e.proxy(t.submitForm,t)),t.$container.find(".kv-fileinput-upload").off("click").on("click",(function(i){t.isUploadable&&(i.preventDefault(),!e(this).hasClass("disabled")&&u(e(this).attr("disabled"))&&t.upload())}))},submitForm:function(){var e=this,t=e.$element.get(0).files;return t&&t.length<e.minFileCount&&e.minFileCount>0?(e.noFilesError({}),!1):!e.abort({})},abort:function(t){var i,a=this;return!(!a.ajaxAborted||"object"!=typeof a.ajaxAborted||void 0===a.ajaxAborted.message)&&(i=void 0!==a.ajaxAborted.data?a.getOutData({},a.ajaxAborted.data):a.getOutData(),i=e.extend(i,t),a.showUploadError(a.ajaxAborted.message,i,"filecustomerror"),!0)},noFilesError:function(e){var t=this,i=t.minFileCount>1?t.filePlural:t.fileSingle,a=t.msgFilesTooLess.repl("{n}",t.minFileCount).repl("{files}",i),n=t.$errorContainer;n.html(a),t.isError=!0,t.updateFileDetails(0),n.fadeIn(800),t.raise("fileerror",[e]),t.clearFileInput(),r(t.$container,"has-error")},setProgress:function(e){var t=this,i=Math.min(e,100),a=100>i?t.progressTemplate:t.progressCompleteTemplate;t.$progress.html(a.repl("{percent}",i))},upload:function(){var t,i,a,n=this,r=n.getFileStack().length,o=!e.isEmptyObject(n.getExtraData());if(r<n.minFileCount&&n.minFileCount>0)n.noFilesError({});else if(n.isUploadable&&!n.isDisabled&&(0!==r||o)){if(n.resetUpload(),n.$progress.removeClass("hide"),n.uploadCount=0,n.uploadPercent=0,n.lock(),n.setProgress(0),0===r&&o)return void n.uploadExtraOnly();if(a=n.filestack.length,n.hasInitData=!1,n.uploadAsync&&n.showPreview)for(i=n.getOutData(),n.raise("filebatchpreupload",[i]),n.fileBatchCompleted=!1,n.uploadCache={content:[],config:[],tags:[],append:!0},t=0;a>t;t+=1)void 0!==n.filestack[t]&&n.uploadSingle(t,n.filestack,!0);else n.uploadBatch()}},lock:function(){var e=this;e.resetErrors(),e.disable(),e.showRemove&&r(e.$container.find(".fileinput-remove"),"hide"),e.showCancel&&e.$container.find(".fileinput-cancel").removeClass("hide"),e.raise("filelock",[e.filestack,e.getExtraData()])},unlock:function(e){var t=this;void 0===e&&(e=!0),t.enable(),t.showCancel&&r(t.$container.find(".fileinput-cancel"),"hide"),t.showRemove&&t.$container.find(".fileinput-remove").removeClass("hide"),e&&t.resetFileStack(),t.raise("fileunlock",[t.filestack,t.getExtraData()])},resetFileStack:function(){var t=this,i=0,a=[];t.getThumbs().each((function(){var n=e(this),r=n.attr("data-fileindex"),o=t.filestack[r];-1!==r&&(void 0!==o?(a[i]=o,n.attr({id:t.previewInitId+"-"+i,"data-fileindex":i}),i+=1):n.attr({id:"uploaded-"+m(),"data-fileindex":"-1"}))})),t.filestack=a},refresh:function(t){var i=this,a=i.$element,n=arguments.length?e.extend(i.options,t):i.options;a.off(),i.init(n),i.$container.find(".file-drop-zone").off("dragenter dragover drop"),e(document).off("dragenter dragover drop"),i.listen(),i.setFileDropZoneTitle()},initDragDrop:function(){var t=this,i=t.$container.find(".file-drop-zone");i.off("dragenter dragover drop"),e(document).off("dragenter dragover drop"),i.on("dragenter dragover",(function(i){i.stopPropagation(),i.preventDefault(),t.isDisabled||r(e(this),"highlighted")})),i.on("dragleave",(function(i){i.stopPropagation(),i.preventDefault(),t.isDisabled||e(this).removeClass("highlighted")})),i.on("drop",(function(i){i.preventDefault(),t.isDisabled||(t.change(i,"dragdrop"),e(this).removeClass("highlighted"))})),e(document).on("dragenter dragover drop",(function(e){e.stopPropagation(),e.preventDefault()}))},setFileDropZoneTitle:function(){var e=this,t=e.$container.find(".file-drop-zone");t.find("."+e.dropZoneTitleClass).remove(),e.isUploadable&&e.showPreview&&0!==t.length&&!(e.getFileStack().length>0)&&e.dropZoneEnabled&&(0===t.find(".file-preview-frame").length&&t.prepend('<div class="'+e.dropZoneTitleClass+'">'+e.dropZoneTitle+"</div>"),e.$container.removeClass("file-input-new"),r(e.$container,"file-input-ajax-new"))},initFileActions:function(){var t=this;t.$preview.find(".kv-file-remove").each((function(){var a,n,r=e(this),o=r.closest(".file-preview-frame"),l=o.attr("data-fileindex");r.off("click").on("click",(function(){o.fadeOut("slow",(function(){t.filestack[l]=void 0,t.clearObjects(o),o.remove();var e=t.getFileStack(),r=e.length,s=i.count(t.id);t.clearFileInput(),0===r&&0===s?t.reset():(n=(a=s+r)>1?t.getMsgSelected(a):e[0].name,t.setCaption(n))}))}))})),t.$preview.find(".kv-file-upload").each((function(){var i=e(this);i.off("click").on("click",(function(){var e=i.closest(".file-preview-frame").attr("data-fileindex");t.uploadSingle(e,t.filestack,!1)}))}))},getMsgSelected:function(e){var t=this,i=1===e?t.fileSingle:t.filePlural;return t.msgSelected.repl("{n}",e).repl("{files}",i)},renderFileFooter:function(e,t){var i,a=this,n=a.fileActionSettings,r=a.getLayoutTemplate("footer");return a.isUploadable?i=r.repl("{actions}",a.renderFileActions(!0,!0,!1,!1,!1)).repl("{caption}",e).repl("{width}",t).repl("{indicator}",n.indicatorNew).repl("{indicatorTitle}",n.indicatorNewTitle):i=r.repl("{actions}","").repl("{caption}",e).repl("{width}",t).repl("{indicator}","").repl("{indicatorTitle}",""),g(i,a.previewThumbTags)},renderFileActions:function(e,t,i,a,n){if(!e&&!t)return"";var r=this,o=!1===a?"":' data-url="'+a+'"',l=!1===n?"":' data-key="'+n+'"',s=r.getLayoutTemplate("actionDelete"),c="",p=r.getLayoutTemplate("actions"),d=r.otherActionButtons.repl("{dataKey}",l),u=r.fileActionSettings,f=i?u.removeClass+" disabled":u.removeClass;return s=s.repl("{removeClass}",f).repl("{removeIcon}",u.removeIcon).repl("{removeTitle}",u.removeTitle).repl("{dataUrl}",o).repl("{dataKey}",l),e&&(c=r.getLayoutTemplate("actionUpload").repl("{uploadClass}",u.uploadClass).repl("{uploadIcon}",u.uploadIcon).repl("{uploadTitle}",u.uploadTitle)),p.repl("{delete}",s).repl("{upload}",c).repl("{other}",d)},initPreview:function(e){var t,a=this,n=a.initialCaption||"";return i.count(a.id)?(t=i.out(a.id),n=e&&a.initialCaption?a.initialCaption:t.caption,a.$preview.html(t.content),a.setCaption(n),void(u(t.content)||a.$container.removeClass("file-input-new"))):(a.$preview.html(""),void(e?a.setCaption(n):a.initCaption()))},initPreviewDeletes:function(){var t=this,a=t.deleteExtraData||{},n=function(){0===t.$preview.find(".kv-file-remove").length&&(t.reset(),t.initialCaption="")};t.$preview.find(".kv-file-remove").each((function(){var o=e(this),l=o.data("url")||t.deleteUrl,s=o.data("key");if(!u(l)&&void 0!==s){var c,p,d,f,h=o.closest(".file-preview-frame"),v=i.data[t.id],m=h.data("fileindex");m=parseInt(m.replace("init_","")),d=u(v.config)&&u(v.config[m])?null:v.config[m],"function"==typeof(f=u(d)||u(d.extra)?a:d.extra)&&(f=f()),p={id:o.attr("id"),key:s,extra:f},c=e.extend({url:l,type:"DELETE",dataType:"json",data:e.extend({key:s},f),beforeSend:function(e){t.ajaxAborted=!1,t.raise("filepredelete",[s,e,f]),t.ajaxAborted?e.abort():(r(h,"file-uploading"),r(o,"disabled"))},success:function(e,a,r){var l,c;return void 0!==e&&void 0!==e.error?(p.jqXHR=r,p.response=e,t.showError(e.error,p,"filedeleteerror"),h.removeClass("file-uploading"),o.removeClass("disabled"),void n()):(i.unset(t.id,m),c=(l=i.count(t.id))>0?t.getMsgSelected(l):"",t.raise("filedeleted",[s,r,f]),t.setCaption(c),h.removeClass("file-uploading").addClass("file-deleted"),void h.fadeOut("slow",(function(){t.clearObjects(h),h.remove(),n(),l||0!==t.getFileStack().length||(t.setCaption(""),t.reset())})))},error:function(e,i,a){var r=t.parseError(e,a);p.jqXHR=e,p.response={},t.showError(r,p,"filedeleteerror"),h.removeClass("file-uploading"),n()}},t.ajaxDeleteSettings),o.off("click").on("click",(function(){e.ajax(c)}))}}))},clearObjects:function(t){t.find("video audio").each((function(){this.pause(),e(this).remove()})),t.find("img object div").each((function(){e(this).remove()}))},clearFileInput:function(){var t,i,a,n=this,r=n.$element;u(r.val())||(n.isIE9||n.isIE10?(t=r.closest("form"),i=e(document.createElement("form")),a=e(document.createElement("div")),r.before(a),t.length?t.after(i):a.after(i),i.append(r).trigger("reset"),a.before(r).remove(),i.remove()):r.val(""),n.fileInputCleared=!0)},resetUpload:function(){var e=this;e.uploadCache={content:[],config:[],tags:[],append:!0},e.uploadCount=0,e.uploadPercent=0,e.$btnUpload.removeAttr("disabled"),e.setProgress(0),r(e.$progress,"hide"),e.resetErrors(!1),e.ajaxAborted=!1,e.ajaxRequests=[]},cancel:function(){var t,i=this,a=i.ajaxRequests,n=a.length;if(n>0)for(t=0;n>t;t+=1)a[t].abort();i.getThumbs().each((function(){var t=e(this),a=t.attr("data-fileindex");t.removeClass("file-uploading"),void 0!==i.filestack[a]&&(t.find(".kv-file-upload").removeClass("disabled").removeAttr("disabled"),t.find(".kv-file-remove").removeClass("disabled").removeAttr("disabled")),i.unlock()}))},clear:function(){var t,a=this;a.$btnUpload.removeAttr("disabled"),a.resetUpload(),a.filestack=[],a.clearFileInput(),a.resetErrors(!0),a.raise("fileclear"),!a.overwriteInitial&&i.count(a.id)?(a.showFileIcon(),a.resetPreview(),a.setEllipsis(),a.initPreviewDeletes(),a.$container.removeClass("file-input-new")):(a.getThumbs().each((function(){a.clearObjects(e(this))})),a.$preview.html(""),t=!a.overwriteInitial&&a.initialCaption.length>0?a.initialCaption:"",a.setCaption(t),a.setEllipsis(),a.$caption.attr("title",""),r(a.$container,"file-input-new")),0===a.$container.find(".file-preview-frame").length&&(a.initCaption()||a.$captionContainer.find(".kv-caption-icon").hide(),a.setEllipsis()),a.hideFileIcon(),a.raise("filecleared"),a.$captionContainer.focus(),a.setFileDropZoneTitle()},resetPreview:function(){var e,t=this;i.count(t.id)?(e=i.out(t.id),t.$preview.html(e.content),t.setCaption(e.caption)):(t.$preview.html(""),t.initCaption())},reset:function(){var e=this;e.clear(),e.resetPreview(),e.setEllipsis(),e.$container.find(".fileinput-filename").text(""),e.raise("filereset"),e.initialPreview.length>0&&e.$container.removeClass("file-input-new"),e.setFileDropZoneTitle(),e.filestack=[],e.formdata={}},disable:function(){var e=this;e.isDisabled=!0,e.raise("filedisabled"),e.$element.attr("disabled","disabled"),e.$container.find(".kv-fileinput-caption").addClass("file-caption-disabled"),e.$container.find(".btn-file, .fileinput-remove, .kv-fileinput-upload").attr("disabled",!0),e.initDragDrop()},enable:function(){var e=this;e.isDisabled=!1,e.raise("fileenabled"),e.$element.removeAttr("disabled"),e.$container.find(".kv-fileinput-caption").removeClass("file-caption-disabled"),e.$container.find(".btn-file, .fileinput-remove, .kv-fileinput-upload").removeAttr("disabled"),e.initDragDrop()},getThumbs:function(e){return e=e||"",this.$preview.find(".file-preview-frame:not(.file-preview-initial)"+e)},getExtraData:function(){var e=this,t=e.uploadExtraData;return"function"==typeof e.uploadExtraData&&(t=e.uploadExtraData()),t},uploadExtra:function(){var t=this,i=t.getExtraData();0!==i.length&&e.each(i,(function(e,i){t.formdata.append(e,i)}))},initXhr:function(e,t){var i=this;return e.upload&&e.upload.addEventListener("progress",(function(e){var a=0,n=e.loaded||e.position,r=e.total;e.lengthComputable&&(a=Math.ceil(n/r*t)),i.uploadPercent=Math.max(a,i.uploadPercent),i.setProgress(i.uploadPercent)}),!1),e},ajaxSubmit:function(t,i,a,n){var r,o=this;o.uploadExtra(),r=e.extend({xhr:function(){var t=e.ajaxSettings.xhr();return o.initXhr(t,98)},url:o.uploadUrl,type:"POST",dataType:"json",data:o.formdata,cache:!1,processData:!1,contentType:!1,beforeSend:t,success:i,complete:a,error:n},o.ajaxSettings),o.ajaxRequests.push(e.ajax(r))},initUploadSuccess:function(t,a,n){var r,o,l,s,c,p,d,u=this;"object"!=typeof t||e.isEmptyObject(t)||void 0!==t.initialPreview&&t.initialPreview.length>0&&(u.hasInitData=!0,c=t.initialPreview||[],p=t.initialPreviewConfig||[],d=t.initialPreviewThumbTags||[],r=!(void 0!==t.append&&!t.append),u.overwriteInitial=!1,void 0===a||n?n?(u.uploadCache.content.push(c[0]),u.uploadCache.config.push(p[0]),u.uploadCache.tags.push(d[0]),u.uploadCache.append=r):(i.set(u.id,c,p,d,r),u.initPreview(),u.initPreviewDeletes()):(l=i.add(u.id,c,p[0],d[0],r),o=i.get(u.id,l,!1),s=e(o).hide(),a.after(s).fadeOut("slow",(function(){s.fadeIn("slow").css("display:inline-block"),u.initPreviewDeletes(),u.clearFileInput()}))))},uploadSingle:function(t,a,n){var o,l,s,c,p,d,u,f,h,v,m=this,g=m.getFileStack().length,b=new FormData,w=m.previewInitId+"-"+t,x=e("#"+w+":not(.file-preview-initial)"),y=x.find(".kv-file-upload"),C=x.find(".kv-file-remove"),k=x.find(".file-upload-indicator"),T=m.fileActionSettings,E=m.filestack.length>0||!e.isEmptyObject(m.uploadExtraData),F={id:w,index:t};m.formdata=b,0===g||!E||y.hasClass("disabled")||m.abort(F)||(s=function(){m.getThumbs(".file-uploading").length>0||m.fileBatchCompleted||(m.fileBatchCompleted=!0,setTimeout((function(){i.set(m.id,m.uploadCache.content,m.uploadCache.config,m.uploadCache.tags,m.uploadCache.append),m.hasInitData&&(m.initPreview(),m.initPreviewDeletes()),m.setProgress(100),m.unlock(),m.clearFileInput(),m.raise("filebatchuploadcomplete",[m.filestack,m.getExtraData()])}),100))},c=function(e,t){k.html(T[e]),k.attr("title",T[t])},p=function(){!n||0===g||m.uploadPercent>=100||(m.uploadCount+=1,l=80+Math.ceil(20*m.uploadCount/g),m.uploadPercent=Math.max(l,m.uploadPercent),m.setProgress(m.uploadPercent),m.initPreviewDeletes())},d=function(){y.removeAttr("disabled"),C.removeAttr("disabled"),x.removeClass("file-uploading")},u=function(i){o=m.getOutData(i),c("indicatorLoading","indicatorLoadingTitle"),r(x,"file-uploading"),y.attr("disabled",!0),C.attr("disabled",!0),n||m.lock(),m.raise("filepreupload",[o,w,t]),F=e.extend(F,o),m.abort(F)&&(i.abort(),m.setProgress(100))},f=function(i,a,r){o=m.getOutData(r,i),F=e.extend(F,o),setTimeout((function(){void 0===i.error?(c("indicatorSuccess","indicatorSuccessTitle"),y.hide(),C.hide(),m.filestack[t]=void 0,m.raise("fileuploaded",[o,w,t]),m.initUploadSuccess(i,x,n),n||m.resetFileStack()):(c("indicatorError","indicatorErrorTitle"),m.showUploadError(i.error,F))}),100)},h=function(){setTimeout((function(){p(),d(),n?s():m.unlock(!1)}),100)},v=function(i,r,o){var l=m.parseError(i,o,n?a[t].name:null);c("indicatorError","indicatorErrorTitle"),F=e.extend(F,m.getOutData(i)),m.showUploadError(l,F)},b.append(m.uploadFileAttr,a[t]),b.append("file_id",t),m.ajaxSubmit(u,f,h,v))},uploadBatch:function(){var t,i,a,n,o,l,s,c,p=this,d=p.filestack,f=d.length,h=p.filestack.length>0||!e.isEmptyObject(p.uploadExtraData);p.formdata=new FormData,0!==f&&h&&!p.abort({})&&(t=p.fileActionSettings,i=function(i,a,n){var r=e("#"+p.previewInitId+"-"+i).find(".file-upload-indicator");r.html(t[a]),r.attr("title",t[n])},n=function(t){var i=e("#"+p.previewInitId+"-"+t+":not(.file-preview-initial)"),a=i.find(".kv-file-upload"),n=i.find(".kv-file-delete");i.removeClass("file-uploading"),a.removeAttr("disabled"),n.removeAttr("disabled")},a=function(){e.each(d,(function(e){p.filestack[e]=void 0})),p.clearFileInput()},o=function(t){p.lock();var i=p.getOutData(t);p.showPreview&&p.getThumbs().each((function(){var t=e(this),i=t.find(".kv-file-upload"),a=t.find(".kv-file-remove");r(t,"file-uploading"),i.attr("disabled",!0),a.attr("disabled",!0)})),p.raise("filebatchpreupload",[i]),p.abort(i)&&t.abort()},l=function(t,r,o){var l=p.getOutData(o,t),s=p.getThumbs(),c=u(t.errorkeys)?[]:t.errorkeys;void 0===t.error||u(t.error)?(p.raise("filebatchuploadsuccess",[l]),a(),p.showPreview?(s.find(".kv-file-upload").hide(),s.find(".kv-file-remove").hide(),s.each((function(){var t=e(this).attr("data-fileindex");i(t,"indicatorSuccess","indicatorSuccessTitle"),n(t)})),p.initUploadSuccess(t)):p.reset()):(p.showPreview&&(s.each((function(){var t=e(this),a=parseInt(t.attr("data-fileindex"),10);return n(a),0===c.length?void i(a,"indicatorError","indicatorErrorTitle"):void(-1!==e.inArray(a,c)?i(a,"indicatorError","indicatorErrorTitle"):(t.find(".kv-file-upload").hide(),t.find(".kv-file-remove").hide(),i(a,"indicatorSuccess","indicatorSuccessTitle"),p.filestack[a]=void 0))})),p.initUploadSuccess(t)),p.showUploadError(t.error,l,"filebatchuploaderror"))},s=function(){p.setProgress(100),p.unlock(),p.raise("filebatchuploadcomplete",[p.filestack,p.getExtraData()]),p.clearFileInput()},c=function(t,a,n){var r=p.getOutData(t),o=p.parseError(t,n);p.showUploadError(o,r,"filebatchuploaderror"),p.uploadFileCount=f-1,p.showPreview&&(p.getThumbs().each((function(){var t=e(this),a=t.attr("data-fileindex");t.removeClass("file-uploading"),void 0!==p.filestack[a]&&i(a,"indicatorError","indicatorErrorTitle")})),p.getThumbs().removeClass("file-uploading"),p.getThumbs(" .kv-file-upload").removeAttr("disabled"),p.getThumbs(" .kv-file-delete").removeAttr("disabled"))},e.each(d,(function(e,t){u(d[e])||p.formdata.append(p.uploadFileAttr,t)})),p.ajaxSubmit(o,l,s,c))},uploadExtraOnly:function(){var e,t,i,a,n=this,r={};n.formdata=new FormData,n.abort(r)||(e=function(e){n.lock();var t=n.getOutData(e);n.raise("filebatchpreupload",[t]),n.setProgress(50),r.data=t,r.xhr=e,n.abort(r)&&(e.abort(),n.setProgress(100))},t=function(e,t,i){var a=n.getOutData(i,e);void 0===e.error||u(e.error)?(n.raise("filebatchuploadsuccess",[a]),n.clearFileInput(),n.initUploadSuccess(e)):n.showUploadError(e.error,a,"filebatchuploaderror")},i=function(){n.setProgress(100),n.unlock(),n.raise("filebatchuploadcomplete",[n.filestack,n.getExtraData()]),n.clearFileInput()},a=function(e,t,i){var a=n.getOutData(e),o=n.parseError(e,i);r.data=a,n.showUploadError(o,a,"filebatchuploaderror")},n.ajaxSubmit(e,t,i,a))},hideFileIcon:function(){this.overwriteInitial&&this.$captionContainer.find(".kv-caption-icon").hide()},showFileIcon:function(){this.$captionContainer.find(".kv-caption-icon").show()},resetErrors:function(e){var t=this,i=t.$errorContainer;t.isError=!1,t.$container.removeClass("has-error"),i.html(""),e?i.fadeOut("slow"):i.hide()},showFolderError:function(e){var t=this,i=t.$errorContainer;e&&(i.html(t.msgFoldersNotAllowed.repl("{n}",e)),i.fadeIn(800),r(t.$container,"has-error"),t.raise("filefoldererror",[e]))},showUploadError:function(e,t,i){var a=this,n=a.$errorContainer,o=i||"fileuploaderror"
;return 0===n.find("ul").length?n.html("<ul><li>"+e+"</li></ul>"):n.find("ul").append("<li>"+e+"</li>"),n.fadeIn(800),a.raise(o,[t]),r(a.$container,"has-error"),!0},showError:function(e,t,i){var a=this,n=a.$errorContainer,o=i||"fileerror";return(t=t||{}).reader=a.reader,n.html(e),n.fadeIn(800),a.raise(o,[t]),a.isUploadable||a.clearFileInput(),r(a.$container,"has-error"),a.$btnUpload.attr("disabled",!0),!0},errorHandler:function(e,t){var i=this,a=e.target.error;switch(a.code){case a.NOT_FOUND_ERR:i.showError(i.msgFileNotFound.repl("{name}",t));break;case a.SECURITY_ERR:i.showError(i.msgFileSecured.repl("{name}",t));break;case a.NOT_READABLE_ERR:i.showError(i.msgFileNotReadable.repl("{name}",t));break;case a.ABORT_ERR:i.showError(i.msgFilePreviewAborted.repl("{name}",t));break;default:i.showError(i.msgFilePreviewError.repl("{name}",t))}},parseFileType:function(e){var t,i,a;for(a=0;a<c.length;a+=1)if(i=c[a],t=(h(i,this.fileTypeSettings)?this.fileTypeSettings[i]:d[i])(e.type,e.name)?i:"",!u(t))return t;return"other"},previewDefault:function(t,i,a){if(this.showPreview){var n=this,r=b.createObjectURL(t),o=e("#"+i),l=n.previewSettings.other,s=n.renderFileFooter(t.name,l.width),c=n.getPreviewTemplate("other"),p=i.slice(i.lastIndexOf("-")+1),d="";!0===a&&(d=" btn disabled",s+='<div class="file-other-error text-danger"><i class="glyphicon glyphicon-exclamation-sign"></i></div>'),n.$preview.append("\n"+c.repl("{previewId}",i).repl("{frameClass}",d).repl("{fileindex}",p).repl("{caption}",n.slug(t.name)).repl("{width}",l.width).repl("{height}",l.height).repl("{type}",t.type).repl("{data}",r).repl("{footer}",s)),o.on("load",(function(){b.revokeObjectURL(o.attr("data"))}))}},previewFile:function(e,t,i,a){if(this.showPreview){var n,r,o,l,s=this,c=s.parseFileType(e),d=s.slug(e.name),f=s.allowedPreviewTypes,v=s.allowedPreviewMimeTypes,g=s.getPreviewTemplate(c),w=h(c,s.previewSettings)?s.previewSettings[c]:p[c],x=parseInt(s.wrapTextLength,10),y=s.wrapIndicator,C=f.indexOf(c)>=0,k=u(v)||!u(v)&&-1!==v.indexOf(e.type),T=s.renderFileFooter(d,w.width),E="",F=i.slice(i.lastIndexOf("-")+1);C&&k?("text"===c?(r=function(e){return String(e).repl("&","&amp;").repl('"',"&quot;").repl("'","&#39;").repl("<","&lt;").repl(">","&gt;")}(t.target.result),b.revokeObjectURL(a),r.length>x&&(o="text-"+m(),l=.75*window.innerHeight,E=s.getLayoutTemplate("modal").repl("{id}",o).repl("{title}",d).repl("{height}",l).repl("{body}",r),y=y.repl("{title}",d).repl("{dialog}","$('#"+o+"').modal('show')"),r=r.substring(0,x-1)+y),n=g.repl("{previewId}",i).repl("{caption}",d).repl("{frameClass}","").repl("{type}",e.type).repl("{width}",w.width).repl("{height}",w.height).repl("{data}",r).repl("{footer}",T).repl("{fileindex}",F)+E):n=g.repl("{previewId}",i).repl("{caption}",d).repl("{frameClass}","").repl("{type}",e.type).repl("{data}",a).repl("{width}",w.width).repl("{height}",w.height).repl("{footer}",T).repl("{fileindex}",F),s.$preview.append("\n"+n),s.autoSizeImage(i)):s.previewDefault(e,i)}},slugDefault:function(e){return u(e)?"":e.split(/(\\|\/)/g).pop().replace(/[^\w\u00C0-\u017F\-.\\\/ ]+/g,"")},getFileStack:function(){return this.filestack.filter((function(e){return void 0!==e}))},readFiles:function(t){this.reader=new FileReader;var i=this,a=i.$element,n=i.$preview,r=i.reader,o=i.$previewContainer,l=i.$previewStatus,s=i.msgLoading,c=i.msgProgress,p=i.previewInitId,v=t.length,m=i.fileTypeSettings,g=i.filestack.length,w=function(a,n,r,o){var l=e.extend(i.getOutData({},{},t),{id:r,index:o}),s={id:r,index:o,file:n,files:t};return i.previewDefault(n,r,!0),i.isUploadable?i.showUploadError(a,l):i.showError(a,s)};(function e(x){if(u(a.attr("multiple"))&&(v=1),x>=v)return i.isUploadable&&i.filestack.length>0?i.raise("filebatchselected",[i.getFileStack()]):i.raise("filebatchselected",[t]),o.removeClass("loading"),void l.html("");var y,C,k,T,E,F=p+"-"+(g+x),D=t[x],S=i.slug(D.name),j=(D.size||0)/1e3,I="",$=b.createObjectURL(D),P=0,A=i.allowedFileTypes,M=u(A)?"":A.join(", "),L=i.allowedFileExtensions,U=u(L)?"":L.join(", ");if(u(L)||(I=new RegExp("\\.("+L.join("|")+")$","i")),j=j.toFixed(2),i.maxFileSize>0&&j>i.maxFileSize)return k=i.msgSizeTooLarge.repl("{name}",S).repl("{size}",j).repl("{maxSize}",i.maxFileSize),void(i.isError=w(k,D,F,x));if(!u(A)&&f(A)){for(C=0;C<A.length;C+=1)T=A[C],E=void 0!==(y=m[T])&&y(D.type,S),P+=u(E)?0:E.length;if(0===P)return k=i.msgInvalidFileType.repl("{name}",S).repl("{types}",M),void(i.isError=w(k,D,F,x))}return 0!==P||u(L)||!f(L)||u(I)||(E=S.match(I),0!==(P+=u(E)?0:E.length))?i.showPreview?(n.length>0&&void 0!==FileReader?(l.html(s.repl("{index}",x+1).repl("{files}",v)),o.addClass("loading"),r.onerror=function(e){i.errorHandler(e,S)},r.onload=function(e){i.previewFile(D,e,F,$),i.initFileActions()},r.onloadend=function(){k=c.repl("{index}",x+1).repl("{files}",v).repl("{percent}",50).repl("{name}",S),setTimeout((function(){l.html(k),b.revokeObjectURL($)}),100),setTimeout((function(){e(x+1),i.updateFileDetails(v)}),100),i.raise("fileloaded",[D,F,x,r])},r.onprogress=function(e){if(e.lengthComputable){var t=e.loaded/e.total*100,i=Math.ceil(t);k=c.repl("{index}",x+1).repl("{files}",v).repl("{percent}",i).repl("{name}",S),setTimeout((function(){l.html(k)}),100)}},(h("text",m)?m.text:d.text)(D.type,S)?r.readAsText(D,i.textEncoding):r.readAsArrayBuffer(D)):(i.previewDefault(D,F),setTimeout((function(){e(x+1),i.updateFileDetails(v)}),100),i.raise("fileloaded",[D,F,x,r])),void i.filestack.push(D)):(i.filestack.push(D),setTimeout(e(x+1),100),void i.raise("fileloaded",[D,F,x,r])):(k=i.msgInvalidFileExtension.repl("{name}",S).repl("{extensions}",U),void(i.isError=w(k,D,F,x)))})(0),i.updateFileDetails(v,!1)},updateFileDetails:function(e){var t=this,a=t.$element,n=t.getFileStack(),r=a.val()||n.length&&n[0].name||"",o=t.slug(r),l=t.isUploadable?n.length:e,s=i.count(t.id)+l,c=l>1?t.getMsgSelected(s):o;t.isError?(t.$previewContainer.removeClass("loading"),t.$previewStatus.html(""),t.$captionContainer.find(".kv-caption-icon").hide()):t.showFileIcon(),t.setCaption(c,t.isError),t.$container.removeClass("file-input-new file-input-ajax-new"),1===arguments.length&&t.raise("fileselect",[e,o]),i.count(t.id)&&t.initPreviewDeletes()},change:function(t){var a=this,n=a.$element;if(a.isUploadable||!u(n.val())||!a.fileInputCleared){a.fileInputCleared=!1;var r,o,l,s,c=a.$preview,p=arguments.length>1,d=p?t.originalEvent.dataTransfer.files:n.get(0).files,f=u(n.attr("multiple")),h=0,v=0,m=a.filestack.length,g=a.isUploadable,b=function(t,i,n,r){var o=e.extend(a.getOutData({},{},d),{id:n,index:r}),l={id:n,index:r,file:i,files:d};return a.isUploadable?a.showUploadError(t,o):a.showError(t,l)};if(a.reader=null,a.resetUpload(),a.hideFileIcon(),a.isUploadable&&a.$container.find(".file-drop-zone ."+a.dropZoneTitleClass).remove(),p)for(r=[];d[h];)(s=d[h]).type||s.size%4096!=0?r.push(s):v++,h++;else r=void 0===t.target.files?t.target&&t.target.value?[{name:t.target.value.replace(/^.+\\/,"")}]:[]:t.target.files;if(u(r)||0===r.length)return g||a.clear(),a.showFolderError(v),void a.raise("fileselectnone");if(a.resetErrors(),!g||f&&m>0){if(!a.overwriteInitial&&i.count(a.id)){var w=i.out(a.id);c.html(w.content),a.setCaption(w.caption),a.initPreviewDeletes()}else c.html("");f&&m>0&&(a.filestack=[])}return l=a.isUploadable?a.getFileStack().length+r.length:r.length,a.maxFileCount>0&&l>a.maxFileCount?(o=a.msgFilesTooMany.repl("{m}",a.maxFileCount).repl("{n}",l),a.isError=b(o,null,null,null),a.$captionContainer.find(".kv-caption-icon").hide(),a.$caption.html(a.msgValidationError),a.setEllipsis(),void a.$container.removeClass("file-input-new file-input-ajax-new")):(a.isIE9?a.updateFileDetails(1):a.readFiles(r),void a.showFolderError(v))}a.fileInputCleared=!1},autoSizeImage:function(e){var t,i,a,n=this,r=n.$preview,o=r.find("#"+e),l=o.find("img");l.length&&l.on("load",(function(){t=o.width(),i=r.width(),t>i&&(l.css("width","100%"),o.css("width","97%")),(a=l.closest(".file-preview-frame").find(".file-caption-name")).length&&(a.width(l.width()),a.attr("title",a.text())),n.raise("fileimageloaded",e)}))},initCaption:function(){var e=this,t=e.initialCaption||"";return e.overwriteInitial||u(t)?(e.$caption.html(""),!1):(e.setCaption(t),!0)},setCaption:function(t,i){var a,n,r=this;if(i||!1)a=e("<div>"+r.msgValidationError+"</div>").text(),n='<span class="'+r.msgValidationErrorClass+'">'+r.msgValidationErrorIcon+a+"</span>";else{if(u(t)||0===r.$caption.length)return;a=e("<div>"+t+"</div>").text(),n=r.getLayoutTemplate("icon")+a}r.$caption.html(n),r.$caption.attr("title",a),r.$captionContainer.find(".file-caption-ellipsis").attr("title",a),r.setEllipsis()},initBrowse:function(e){var t=this;t.$btnFile=e.find(".btn-file"),t.$btnFile.append(t.$element)},createContainer:function(){var t=this,i=e(document.createElement("span")).attr({class:"file-input file-input-new"}).html(t.renderMain());return t.$element.before(i),t.initBrowse(i),i},refreshContainer:function(){var e=this,t=e.$container;t.before(e.$element),t.html(e.renderMain()),e.initBrowse(t)},renderMain:function(){var e=this,t=e.isUploadable&&e.dropZoneEnabled?" file-drop-zone":"",i=e.showPreview?e.getLayoutTemplate("preview").repl("{class}",e.previewClass).repl("{dropClass}",t):"",a=e.isDisabled?e.captionClass+" file-caption-disabled":e.captionClass,n=e.captionTemplate.repl("{class}",a+" kv-fileinput-caption");return e.mainTemplate.repl("{class}",e.mainClass).repl("{preview}",i).repl("{caption}",n).repl("{upload}",e.renderUpload()).repl("{remove}",e.renderRemove()).repl("{cancel}",e.renderCancel()).repl("{browse}",e.renderBrowse())},renderBrowse:function(){var e=this,t=e.browseClass+" btn-file",i="";return e.isDisabled&&(i=" disabled "),'<div class="'+t+'"'+i+"> "+e.browseIcon+e.browseLabel+" </div>"},renderRemove:function(){var e=this,t=e.removeClass+" fileinput-remove fileinput-remove-button",i="";return e.showRemove?(e.isDisabled&&(i=" disabled "),'<button type="button" title="'+e.removeTitle+'" class="'+t+'"'+i+">"+e.removeIcon+e.removeLabel+"</button>"):""},renderCancel:function(){var e=this,t=e.cancelClass+" fileinput-cancel fileinput-cancel-button";return e.showCancel?'<button type="button" title="'+e.cancelTitle+'" class="hide '+t+'">'+e.cancelIcon+e.cancelLabel+"</button>":""},renderUpload:function(){var e=this,t=e.uploadClass+" kv-fileinput-upload fileinput-upload-button",i="";return e.showUpload?(e.isDisabled&&(i=" disabled "),!e.isUploadable||e.isDisabled?'<button type="submit" title="'+e.uploadTitle+'"class="'+t+'"'+i+">"+e.uploadIcon+e.uploadLabel+"</button>":'<a href="'+e.uploadUrl+'" title="'+e.uploadTitle+'" class="'+t+'"'+i+">"+e.uploadIcon+e.uploadLabel+"</a>"):""}},e.fn.fileinput=function(i){if(a()||t(9)){var n=Array.apply(null,arguments);return n.shift(),this.each((function(){var t,a=e(this),r=a.data("fileinput"),o="object"==typeof i&&i,l=o.language||a.data("language")||"en";r||(t=e.extend({},e.fn.fileinput.defaults),"en"===l||u(e.fn.fileinputLocales[l])||(t=e.extend(t,e.fn.fileinputLocales[l])),r=new w(this,e.extend(t,o,a.data())),a.data("fileinput",r)),"string"==typeof i&&r[i].apply(r,n)}))}},e.fn.fileinput.defaults={language:"en",showCaption:!0,showPreview:!0,showRemove:!0,showUpload:!0,showCancel:!0,mainClass:"",previewClass:"",captionClass:"",mainTemplate:null,initialCaption:"",initialPreview:[],initialPreviewDelimiter:"*$$*",initialPreviewConfig:[],initialPreviewThumbTags:[],previewThumbTags:{},initialPreviewShowDelete:!0,deleteUrl:"",deleteExtraData:{},overwriteInitial:!0,layoutTemplates:l,previewTemplates:s,allowedPreviewTypes:c,allowedPreviewMimeTypes:null,allowedFileTypes:null,allowedFileExtensions:null,customLayoutTags:{},customPreviewTags:{},previewSettings:p,fileTypeSettings:d,previewFileIcon:'<i class="glyphicon glyphicon-file"></i>',browseIcon:'<i class="glyphicon glyphicon-folder-open"></i> &nbsp;',browseClass:"btn btn-primary",removeIcon:'<i class="glyphicon glyphicon-trash"></i> ',removeClass:"btn btn-default",cancelIcon:'<i class="glyphicon glyphicon-ban-circle"></i> ',cancelClass:"btn btn-default",uploadIcon:'<i class="glyphicon glyphicon-upload"></i> ',uploadClass:"btn btn-default",uploadUrl:null,uploadAsync:!0,uploadExtraData:{},maxFileSize:0,minFileCount:0,maxFileCount:0,msgValidationErrorClass:"text-danger",msgValidationErrorIcon:'<i class="glyphicon glyphicon-exclamation-sign"></i> ',msgErrorClass:"file-error-message",progressClass:"progress-bar progress-bar-success progress-bar-striped active",progressCompleteClass:"progress-bar progress-bar-success",previewFileType:"image",wrapTextLength:250,wrapIndicator:' <span class="wrap-indicator" title="{title}" onclick="{dialog}">[&hellip;]</span>',elCaptionContainer:null,elCaptionText:null,elPreviewContainer:null,elPreviewImage:null,elPreviewStatus:null,elErrorContainer:null,slugCallback:null,dropZoneEnabled:!0,dropZoneTitleClass:"file-drop-zone-title",fileActionSettings:{},otherActionButtons:"",textEncoding:"UTF-8",ajaxSettings:{},ajaxDeleteSettings:{},showAjaxErrorDetails:!0},e.fn.fileinputLocales.en={fileSingle:"file",filePlural:"files",browseLabel:"Browse &hellip;",removeLabel:"Remove",removeTitle:"Clear selected files",cancelLabel:"Cancel",cancelTitle:"Abort ongoing upload",uploadLabel:"Upload",uploadTitle:"Upload selected files",msgSizeTooLarge:'File "{name}" (<b>{size} KB</b>) exceeds maximum allowed upload size of <b>{maxSize} KB</b>. Please retry your upload!',msgFilesTooLess:"You must select at least <b>{n}</b> {files} to upload. Please retry your upload!",msgFilesTooMany:"Number of files selected for upload <b>({n})</b> exceeds maximum allowed limit of <b>{m}</b>. Please retry your upload!",msgFileNotFound:'File "{name}" not found!',msgFileSecured:'Security restrictions prevent reading the file "{name}".',msgFileNotReadable:'File "{name}" is not readable.',msgFilePreviewAborted:'File preview aborted for "{name}".',msgFilePreviewError:'An error occurred while reading the file "{name}".',msgInvalidFileType:'Invalid type for file "{name}". Only "{types}" files are supported.',msgInvalidFileExtension:'Invalid extension for file "{name}". Only "{extensions}" files are supported.',msgValidationError:"File Upload Error",msgLoading:"Loading file {index} of {files} &hellip;",msgProgress:"Loading file {index} of {files} - {name} - {percent}% completed.",msgSelected:"{n} {files} selected",msgFoldersNotAllowed:"Drag & drop files only! {n} folder(s) dropped were skipped.",dropZoneTitle:"Drag & drop files here &hellip;"},e.extend(e.fn.fileinput.defaults,e.fn.fileinputLocales.en),e.fn.fileinput.Constructor=w,e(document).ready((function(){var t=e("input.file[type=file]");t.length&&t.fileinput()}))}(window.jQuery);
//# sourceMappingURL=vendor-min.js.map